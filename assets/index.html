<!DOCTYPE html><html lang="tr"><head><meta charset="utf-8"/><title>HLS Player</title><meta name="viewport" content="width=device-width,initial-scale=1"/><style>body{margin:0;font-family:system-ui;background:#111;color:#eee;display:flex;height:100vh}aside{width:220px;background:#181a1f;padding:10px;overflow:auto}main{flex:1;display:flex;flex-direction:column}h1{font-size:16px;margin:0 0 8px}button.chan{display:block;width:100%;margin:4px 0;padding:6px 8px;background:#2c313c;color:#ddd;border:1px solid #3a404c;border-radius:4px;cursor:pointer;text-align:left;font-size:13px}button.chan.active,button.chan:hover{background:#3d4452}#videoWrapper{flex:1;display:flex;align-items:center;justify-content:center;padding:10px}video{width:100%;max-width:100%;background:#000;aspect-ratio:16/9}#status{padding:6px 10px;font-size:12px;background:#20232a;border-top:1px solid #2c313c;font-family:monospace;white-space:pre-wrap}</style></head><body><aside><h1>Channels</h1><div id="chanList"></div></aside><main><div id="videoWrapper"><video id="player" controls autoplay playsinline></video></div><div id="status">Loading...</div></main><script src="/hls.min.js"></script><script>async function fetchChannels(){const r=await fetch('/channels');return await r.json()}function log(msg){document.getElementById('status').textContent=msg;}function play(url,name){const video=document.getElementById('player');if(window.Hls&&Hls.isSupported()){if(window._hls){window._hls.destroy();}const hls=new Hls({maxBufferLength:25});window._hls=hls;hls.loadSource(url);hls.attachMedia(video);hls.on(Hls.Events.MANIFEST_PARSED,function(){video.play();log('Streaming: '+name);});hls.on(Hls.Events.ERROR,function(e,d){log('HLS Error: '+d.details);});}else if(video.canPlayType('application/vnd.apple.mpegurl')){video.src=url;video.addEventListener('loadedmetadata',()=>{video.play();log('Streaming: '+name);});}else{log('Tarayici HLS desteklemiyor.');}}function buildList(chans){const wrap=document.getElementById('chanList');wrap.innerHTML='';chans.forEach(c=>{const b=document.createElement('button');b.className='chan';b.textContent=c.name;b.onclick=()=>{document.querySelectorAll('button.chan').forEach(x=>x.classList.remove('active'));b.classList.add('active');play(c.url,c.name);};wrap.appendChild(b);});if(chans.length){wrap.querySelector('button.chan').click();}}fetchChannels().then(cs=>{buildList(cs);}).catch(e=>log('Channel list error: '+e));</script></body></html>